
# Description
The purpose of this server is to easily serve exploit functionality

currently working on CSRF using xhr

# Setup
	git clone git@github.com:SirAppSec/exploit-server.git
Get some Azure/EC2 light server
https://portal.azure.com/#blade/HubsExtension/BrowseResource/resourceType/Microsoft.Compute%2FVirtualMachines

### establish ssh into the server
add pem to keychain
```bash
sudo ssh-add exploit-server_key.pem	
```
init Nginx
```bash
sudo apt-get update
sudo apt-get install nginx
```
In your local files, update the IP address of your server in `nginx/nginx.conf` config and `./update-server.sh` bash script

# upload files
add execute permissions
	sudo chmod +x ./update-server.sh
	./update-server.sh

# Optionals
### Let's Encrypt
set  up a domain in Azure
* http://exploit.germanywestcentral.cloudapp.azure.com/
* Open firewall:
	```
	sudo ufw allow 80
	sudo ufw allow 443
	
	```
* Add it as a server in the config
* Install Let's Encrypt in the server:
	```
	sudo apt install letsencrypt
	sudo systemctl status certbot.timer
	apt install python3-certbot-nginx
	sudo certbot --nginx --agree-tos --preferred-challenges http -d exploit.germanywestcentral.cloudapp.azure.com --noninteractive
	
	```
	The `./update-server.sh` script will try add certs without any further interations
	https://exploit.germanywestcentral.cloudapp.azure.com/


# Usage
note that CORS are set to 
Allow-Origin *;
You cant test the CORS: 
https://exploit.germanywestcentral.cloudapp.azure.com//xhr.html?n=3&url=https://www.test-cors.org/
## XHR
https://exploit.germanywestcentral.cloudapp.azure.com/xhr.html?action=POST&payload=email%3dwiener%40admin.net&n=2&url=http://demo.testfire.net

## Notes
* The Nginx config is set to allow CORS for all origins and handles preflight
* XHR is async in accordance with: https://xhr.spec.whatwg.org/ and send subsequent requests in a series ( Stops when 1 fail ). 